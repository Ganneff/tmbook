<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Simple - tm - a tmux manager / helper</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="section-lines.css">
        <link rel="stylesheet" href="version-commit.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">

<!-- Start extra link above the ToC -->
<!--
                &#x2192; <a class='part-title' href='https://github.com/'>GitHub</a>
                <hr/>
-->
<!-- End extra link above the ToC -->

                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="commandline.html">Commandline</a></li><li class="chapter-item expanded "><a href="sessionfiles.html">Session files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="simple.html" class="active">Simple</a></li><li class="chapter-item expanded "><a href="extended.html">Extended</a></li></ol></li></ol>

<!-- Start version-commit content below ToC -->
                <hr/>
                <div class="part-title">Version</div>
                <div id="commit" class='version-commit-div'>
                    <span class='version-commit-hash'><tt>v0.9.0</tt></span><br/>
                    <span class='version-commit-time'><tt>2023-08-14 04:39:10 +0000</tt></span>
                </div>
                <div class="part-title">Generated</div>
                <div id="generated" class='version-commit-div'>
                    <span class='version-commit-now'><tt>2023-08-14 04:39:44 +0000</tt></span>
                </div>
<!-- End version-commit content below ToC -->

            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">tm - a tmux manager / helper</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Ganneff/tmbook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="simple"><a class="header" href="#simple">Simple</a></h1>
<p>Simple session files are nothing more than files without an extension
to their name, where each line is treated according to the following spec:</p>
<ul>
<li>Line 1: Session name</li>
<li>Line 2: Ignored, but required for backward compatibility</li>
<li>Line 3 ...: Argument line, one of two possibilities:
<ul>
<li>Argument for SSH</li>
<li>The word LIST followed by a shell command.</li>
</ul>
</li>
</ul>
<h2 id="list-command"><a class="header" href="#list-command">LIST command</a></h2>
<p>If an argument line starts with <em>LIST</em>, everything following it is
used as a shell command. The commands stdout is read and every line
read is treated as another argument line. This is recursive, so a line
read by LIST can include another LIST (until stack overflows, so be
careful to not create an endless loop).</p>
<p>Full Shell expansion, that is both tilde and environment variables, is
supported. Details can be taken from the
<a href="https://docs.rs/shellexpand/latest/shellexpand/fn.full.html">shellexpand</a>
rust crates documentation, but in short: ~ expands to the users
homedir, $VAR and ${VAR} expand to the content of the variable VAR,
and non-existing variables expand to an empty string.</p>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<p>Line numbers (if any) added for clarity in the description later,
remove them if you copy this example!</p>
<h4 id="cluster-of-machines"><a class="header" href="#cluster-of-machines">Cluster of machines</a></h4>
<pre><code class="language-bash">somecluster
NONE
host1
user@host2
</code></pre>
<p>This will open a session named &quot;somecluster&quot;, connecting to host1
using the default user (usually your username, or whatever your ssh
config says, if any) and user@host2. It will open one window with two
panes and synchronize input to them, so that any action happens on
both hosts.</p>
<h4 id="machine-list-from-external-command"><a class="header" href="#machine-list-from-external-command">Machine list from external command</a></h4>
<pre><code class="language-bash">nfsserver_mail
NONE
LIST ssh -tt clustermaster &quot;sudo /usr/sbin/gnt-instance list --no-headers -o name --filter '(\&quot;nfs\&quot; in tags and \&quot;prod\&quot; in tags and \&quot;mail\&quot; in tags) and admin_state == \&quot;up\&quot;'&quot;
</code></pre>
<p>This needs sudo for the gnt-instance command on the cluster master, recommended NOPASSWD, and will then fetch a list of (running) hosts where the ganeti tags match nfs, prod and mail. Any other host, or hosts with those tags but marked down, will be ignored.</p>
<h4 id="extended-machine-list-from-external-command-using-tmreplacetm"><a class="header" href="#extended-machine-list-from-external-command-using-tmreplacetm">Extended, machine list from external command using ++TMREPLACETM++</a></h4>
<pre><code class="language-bash">nfsserver_++TMREPLACETM++
NONE
LIST ssh -tt clustermaster &quot;sudo /usr/sbin/gnt-instance list --no-headers -o name --filter '(\&quot;nfs\&quot; in tags and \&quot;prod\&quot; in tags and \&quot;++TMREPLACETM++\&quot; in tags) and admin_state == \&quot;up\&quot;'&quot;
</code></pre>
<p>This is nearly the same as the example just before, except that the mail function is replaced by a token. This token can be given as one more argument after the session file and allows flexibility in the LIST command.
To open the same session as in the example before, that is, all mail VMs, one can run <code>tm vm_nfs mail</code> - assuming the session file is saved as <strong>vm_nfs</strong> in the <em>.tmux.d</em>.</p>


<!-- Start version-commit content below every page -->
                        <hr/>
                        <div class="version-commit-div" style="float: right">
                            Generated
                            <span class='version-commit-now'><tt>2023-08-14 04:39:44 +0000</tt></span>
                        </div>
                        <div class="version-commit-div">
                            <span class='version-commit-hash'><tt>v0.9.0</tt></span>
                            <span class='version-commit-time'><tt>2023-08-14 04:39:10 +0000</tt></span>
                        </div>
<!-- End version-commit content below every page -->

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="sessionfiles.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="extended.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="sessionfiles.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="extended.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
